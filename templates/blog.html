{% extends 'base.html' %}

{% block title %}Codaí - Artigos{% endblock %}
{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/blog.css') }}">
{% endblock %}

{% block content %}
  <div class="blog-main">
    <section class="blog-hero">
      <h1>Artigos Codai</h1>
      <p>
        Artigos didáticos e tutoriais para ajudar estudantes e desenvolvedores a evoluir suas habilidades.
        Encontre guias, explicações passo a passo e materiais práticos para aprender de forma consistente.
      </p>

      <!-- BARRA DE INDICADORES -->
      <div class="blog-dots">
        <span></span><span></span><span></span><span></span><span></span>
      </div>

      <a href="{{ url_for('blog.create_article') }}" class="blog-btn">Escrever artigo</a>
      <form action="{{ url_for('blog.search') }}" method="GET" class="search-form">
        <input type="text" name="q" placeholder="Pesquisar artigos, temas ou autores..." class="blog-input" value="{{ search_query or '' }}">
      </form>
    </section>

    <!-- FILTROS POR CATEGORIA -->
    <section class="blog-filters">
      <h3>Filtrar por categoria:</h3>
      <div class="category-filters">
        <a href="{{ url_for('blog.index') }}" class="filter-btn {% if not selected_category %}active{% endif %}">Todas</a>
        {% for category in categories %}
        <a href="{{ url_for('blog.articles_by_category', category_id=category.id) }}"
           class="filter-btn {% if selected_category and selected_category.id == category.id %}active{% endif %}"
           data-color="{{ category.color|default('#ccc') }}">
          #{{ category.name }}
        </a>
        {% endfor %}
      </div>
    </section>

    <!-- ARTIGOS -->
    <section class="blog-articles">
      <h2>Últimos artigos</h2>
      <div class="blog-grid">
        {% for article in articles %}
        <article class="blog-card {% if article.is_featured %}highlight{% endif %}">
          <img src="{{ article.thumbnail_url or '/static/image/article_thumbnail_1.svg' }}" alt="{{ article.title }}">
          <div class="blog-card-content">
            <h3><a href="{{ url_for('blog.view_article', article_id=article.id) }}">{{ article.title }}</a></h3>
            <p>{{ article.excerpt or article.content[:150] }}{% if article.content|length > 150 and not article.excerpt %}...{% endif %}</p>
            <div class="article-meta">
              <span class="blog-tag" data-color="{{ article.category.color }}">#{{ article.category.name }}</span>
              <span class="article-author">por {{ article.author.nome }}</span>
              <span class="article-date">{{ article.created_at.strftime('%d/%m/%Y') }}</span>
              <span class="reading-time">{{ article.reading_time }} min</span>
              <span class="view-count">{{ article.view_count }} visualizações</span>
            </div>
          </div>
        </article>
        {% endfor %}
        
        {% if not articles %}
        <div class="no-articles">
          <p>Nenhum artigo encontrado. Seja o primeiro a escrever algo!</p>
          <a href="{{ url_for('blog.create_article') }}" class="blog-btn">Criar primeiro artigo</a>
        </div>
        {% endif %}
      </div>
    </section>
  </div>
{% endblock %}